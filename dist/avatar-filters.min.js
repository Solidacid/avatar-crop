!function(){AvatarCrop.execFilter=function(a,b){var c,d,e,f=a.getContext("2d"),g=a.width,h=a.height;(b.vignette||b.lighten)&&(c=Math.sqrt(Math.pow(g/2,2)+Math.pow(h/2,2))),b.vignette&&(f.globalCompositeOperation="source-over",d=f.createRadialGradient(g/2,h/2,0,g/2,h/2,c),d.addColorStop(0,"rgba(0,0,0,0)"),d.addColorStop(.5,"rgba(0,0,0,0)"),d.addColorStop(1,["rgba(0,0,0,",b.vignette,")"].join("")),f.fillStyle=d,f.fillRect(0,0,g,h)),b.lighten&&(f.globalCompositeOperation="lighter",d=f.createRadialGradient(g/2,h/2,0,g/2,h/2,c),d.addColorStop(0,["rgba(255,255,255,",b.lighten,")"].join("")),d.addColorStop(.5,"rgba(255,255,255,0)"),d.addColorStop(1,"rgba(0,0,0,0)"),f.fillStyle=d,f.fillRect(0,0,g,h)),e=f.getImageData(0,0,g,h);var i,j,k,l,m,n,o,p,q,r=e.data;b.contrast&&(q=259*(b.contrast+255)/(255*(259-b.contrast))),b.viewFinder&&(p=window.vjsImageCache[[g,h,b.viewFinder].join("-")]);for(var s=g*h;s>=0;--s)for(i=s<<2,b.curves&&(r[i]=b.curves.r[r[i]],r[i+1]=b.curves.g[r[i+1]],r[i+2]=b.curves.b[r[i+2]]),b.contrast&&(r[i]=q*(r[i]-128)+128,r[i+1]=q*(r[i+1]-128)+128,r[i+2]=q*(r[i+2]-128)+128),b.brightness&&(r[i]+=b.brightness,r[i+1]+=b.brightness,r[i+2]+=b.brightness),b.screen&&(r[i]=255-(255-r[i])*(255-b.screen.r*b.screen.a)/255,r[i+1]=255-(255-r[i+1])*(255-b.screen.g*b.screen.a)/255,r[i+2]=255-(255-r[i+2])*(255-b.screen.b*b.screen.a)/255),b.noise&&(o=b.noise-Math.random()*b.noise/2,r[i]+=o,r[i+1]+=o,r[i+2]+=o),b.viewFinder&&(r[i]=r[i]*p[i]/255,r[i+1]=r[i+1]*p[i+1]/255,r[i+2]=r[i+2]*p[i+2]/255),b.sepia&&(k=r[i],l=r[i+1],m=r[i+2],r[i]=.393*k+.769*l+.189*m,r[i+1]=.349*k+.686*l+.168*m,r[i+2]=.272*k+.534*l+.131*m),b.desaturate&&(n=(r[i]+r[i+1]+r[i+2])/3,r[i]+=(n-r[i])*b.desaturate,r[i+1]+=(n-r[i+1])*b.desaturate,r[i+2]+=(n-r[i+2])*b.desaturate),j=2;j>=0;--j)r[i+j]=~~(r[i+j]>255?255:r[i+j]<0?0:r[i+j]);f.putImageData(e,0,0)}}(window),function(){function a(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function b(b,e,f,g,h,i){if(!(isNaN(i)||1>i)){i|=0;var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H=b.getContext("2d"),I=H.getImageData(e,f,g,h),J=I.data,K=i+i+1,L=g-1,M=h-1,N=i+1,O=N*(N+1)/2,P=new a,Q=P;for(l=1;K>l;l++)if(Q=Q.next=new a,l==N)var R=Q;Q.next=P;var S=null,T=null;p=o=0;var U=c[i],V=d[i];for(k=0;h>k;k++){for(y=z=A=B=q=r=s=t=0,u=N*(C=J[o]),v=N*(D=J[o+1]),w=N*(E=J[o+2]),x=N*(F=J[o+3]),q+=O*C,r+=O*D,s+=O*E,t+=O*F,Q=P,l=0;N>l;l++)Q.r=C,Q.g=D,Q.b=E,Q.a=F,Q=Q.next;for(l=1;N>l;l++)m=o+((l>L?L:l)<<2),q+=(Q.r=C=J[m])*(G=N-l),r+=(Q.g=D=J[m+1])*G,s+=(Q.b=E=J[m+2])*G,t+=(Q.a=F=J[m+3])*G,y+=C,z+=D,A+=E,B+=F,Q=Q.next;for(S=P,T=R,j=0;g>j;j++)J[o+3]=F=t*U>>V,0!=F?(F=255/F,J[o]=(q*U>>V)*F,J[o+1]=(r*U>>V)*F,J[o+2]=(s*U>>V)*F):J[o]=J[o+1]=J[o+2]=0,q-=u,r-=v,s-=w,t-=x,u-=S.r,v-=S.g,w-=S.b,x-=S.a,m=p+((m=j+i+1)<L?m:L)<<2,y+=S.r=J[m],z+=S.g=J[m+1],A+=S.b=J[m+2],B+=S.a=J[m+3],q+=y,r+=z,s+=A,t+=B,S=S.next,u+=C=T.r,v+=D=T.g,w+=E=T.b,x+=F=T.a,y-=C,z-=D,A-=E,B-=F,T=T.next,o+=4;p+=g}for(j=0;g>j;j++){for(z=A=B=y=r=s=t=q=0,o=j<<2,u=N*(C=J[o]),v=N*(D=J[o+1]),w=N*(E=J[o+2]),x=N*(F=J[o+3]),q+=O*C,r+=O*D,s+=O*E,t+=O*F,Q=P,l=0;N>l;l++)Q.r=C,Q.g=D,Q.b=E,Q.a=F,Q=Q.next;for(n=g,l=1;i>=l;l++)o=n+j<<2,q+=(Q.r=C=J[o])*(G=N-l),r+=(Q.g=D=J[o+1])*G,s+=(Q.b=E=J[o+2])*G,t+=(Q.a=F=J[o+3])*G,y+=C,z+=D,A+=E,B+=F,Q=Q.next,M>l&&(n+=g);for(o=j,S=P,T=R,k=0;h>k;k++)m=o<<2,J[m+3]=F=t*U>>V,F>0?(F=255/F,J[m]=(q*U>>V)*F,J[m+1]=(r*U>>V)*F,J[m+2]=(s*U>>V)*F):J[m]=J[m+1]=J[m+2]=0,q-=u,r-=v,s-=w,t-=x,u-=S.r,v-=S.g,w-=S.b,x-=S.a,m=j+((m=k+N)<M?m:M)*g<<2,q+=y+=S.r=J[m],r+=z+=S.g=J[m+1],s+=A+=S.b=J[m+2],t+=B+=S.a=J[m+3],S=S.next,u+=C=T.r,v+=D=T.g,w+=E=T.b,x+=F=T.a,y-=C,z-=D,A-=E,B-=F,T=T.next,o+=g}H.putImageData(I,e,f)}}var c=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],d=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];AvatarCrop.registerFilter("blur",function(a,c){c.getContext("2d");b(c,0,0,c.width,c.height,this.configs.radius)},{radius:5})}(),function(){AvatarCrop.registerFilter("greyscale",function(a,b){AvatarCrop.execFilter(b,{desaturate:1})})}(),function(){AvatarCrop.registerFilter("negative",function(a,b){for(var c=b.getContext("2d"),d=c.getImageData(0,0,b.width,b.height),e=d.data,f=0;f<e.length;f+=4)e[f]=255-e[f],e[f+1]=255-e[f+1],e[f+2]=255-e[f+2];c.putImageData(d,0,0)})}(),function(){AvatarCrop.registerFilter("sepia",function(a,b){AvatarCrop.execFilter(b,{sepia:1})})}(),function(){AvatarCrop.registerFilter("vignette",function(a,b){AvatarCrop.execFilter(b,{vignette:this.configs.radius})},{radius:.16})}();
//# sourceMappingURL=avatar-filters.min.js.map